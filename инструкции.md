# Инстркуции по использованию бота

Далее будет кратко рассказано о том, как запустить и использовать бота для уведомления менеджеров.

## Администратору

Прежде, чем приступать к работе с ботом, убедитесь, что у вас установлены библиотеки vk и mysql-connector-python.

Перед запуском приложения необходимо создать файл настроек (в формате JSON). Для этого используется класс Loader.

~~~ python
>>> # Импортируйте Loader.
... from loader import Loader
>>> # Чтобы создать новый файл настроек, укажите settings_file_name = None.
... l = Loader(None)
>>> # Укажите информацию о менеджерах, которые пока еще не зарегистрированы в приложении.
... nmanager1 = {'name' : 'NewManagerName'}
>>> # В словаре новых менеджеров в кач. ключей используйте пароли менеджеров.
... nmanagers = {'pw1' : nmanager1,}
>>> # Укажите информацию о менеджерах, зарегистрированных в приложении;
... # словарь менеджера обязательно должен содержать ключи 'latest_task', 'latest_notification' и 'latest_msg_type'.
... manager1 = {'name' : 'ManagerName', 'latest_task' : 1, 'latest_notification' : 'not', 'latest_msg_type': None}
>>> # В словаре зарегистрированных менеджеров в кач. ключей используйте id менеджеров в vk.
... managers = {'000000000' : manager1,}
>>> # Укажите настройки, необходимые для доступа к базе заданий и ответов.
... connection_settings = {'host' : '', 'username' : '', 'passwd' : '', 'database' : ''}
>>> # Создайте и сохраните настройки. Перед сохранением обязательно укажите файл, в который оно будет произведено.
... l.create_settings(nmanagers, managers, connection_settings)
>>> l.dump_file_name = 'dump.json'
>>> l.save()
~~~

Также файл настроек можно создать вручную. Пример содержимого файла настроек.

~~~ json
{"new_managers": {"pw1": {"name": "", "latest_task": null}}, "managers": {"000000000": {"name": "", "latest_task": 32, "latest_msg_type": null, "latest_notification": "\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u0434\u0430\u0447: 2 \u0448\u0442\u0443\u043a\n\u0417\u0430\u043a\u0430\u0437 \u043e\u0442 )\u043d\u043d\u04350\u0412\u0430\u0436\u043d\u044b\u0439 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\n\u0421\u0443\u043c\u043c\u0430: 200.4 \u20bd\n\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: \u0422\u0415\u0421\u0422212\n"}}, "connection_settings": {"host": "...", "username": "...", "passwd": "...", "database": "..."}}
~~~

Если при создании Loader указать имя файла настроек, с ними можно будет работать как со словарем.

При запуске приложения укажите имя файла с настройками и имя файла, в который их можно будет сохранить.

~~~ cmd
> py bot.py dump.json settings.json
~~~

Чтобы остановить бота нажмите ENTER.

Для возобновления работы бота укажите в кач. файла настроек тот фал, в который вы их указали сохранять при прошлом запуске.

~~~ cmd
> py bot.py settings.json settings.json
~~~

## Менеджеру

Чтобы бот начал отсылать вам сообщения, напишите ему свой пароль.